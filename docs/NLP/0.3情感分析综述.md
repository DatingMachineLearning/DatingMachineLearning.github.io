> [lihang-code/11.CRF.ipynb at master · fengdu78/lihang-code](https://github.com/fengdu78/lihang-code/blob/master/%E7%AC%AC11%E7%AB%A0%20%E6%9D%A1%E4%BB%B6%E9%9A%8F%E6%9C%BA%E5%9C%BA/11.CRF.ipynb)
>
> [typoverflow/pytorch-crf: 条件随机场（CRF）的pytorch实现](https://github.com/typoverflow/pytorch-crf)
>
> [斯坦福大学自然语言处理第七课“情感分析（Sentiment Analysis）” - 我爱公开课](http://52opencourse.com/235/%E6%96%AF%E5%9D%A6%E7%A6%8F%E5%A4%A7%E5%AD%A6%E8%87%AA%E7%84%B6%E8%AF%AD%E8%A8%80%E5%A4%84%E7%90%86%E7%AC%AC%E4%B8%83%E8%AF%BE-%E6%83%85%E6%84%9F%E5%88%86%E6%9E%90%EF%BC%88sentiment-analysis%EF%BC%89)
>
> [情感分析简介 - 李理的博客](http://fancyerii.github.io/2019/09/25/sentiment-analysis-survey/#%E6%9C%AF%E8%AF%AD%E8%A7%A3%E9%87%8A)
>
> [Sentiment Analysis情感分析——珍藏版](https://mp.weixin.qq.com/s/5VrZTMlNxbgZmaeOxBps_w)

# 情感分析综述

文本情感分析又称意见挖掘，简单而言，是对带有情感色彩的主观性文本进行分析、处理、归纳和推理的过程。

最初的情感分析源自前人对带有情感色彩的词语的分析[1]，如，“美好”是带有褒义色彩的词语，而“丑陋”是带有贬义色彩的词语。随着互联网上大量的带有情感色彩的主观性文本的出现，研究者们逐渐从简单的情感词语的分析研究过渡到更为复杂的情感句研究以及情感篇章的研究。基于此，按照处理文本的粒度不同，情感分析可分为词语级、短语级、句子级、篇章级以及多篇章级等几个研究层次[2]。

按照处理文本的类别不同，可分为基于新闻评论的情感分析和基于产品评论的情感分析。其中，前者处理的文本主要是新闻评论，如情感句“他坚定地认为台湾是中国不可分割的一部分”，表明了观点持有者“他”对于事件“台湾归属问题”的立场;后者处理的主要是网络在线的产品评论文本，如“Polo的外观很时尚”，表明了对评价对象“Polo的外观”的评价“时尚”是褒义的。由于基于产品评论的情感分析可以帮助用户了解某一产品在大众心目中的口碑，因此受到很多消费者和商业网站的青睐。而基于新闻评论的情感分析多用于舆情监控和信息预测中，是国内外评测中重要的评测任务。

Sentiment analysis 说白了就是来分析人们对一个事物的**态度(attitudes)**，包含下面**几个元素**(以 Mary likes the movie 为例)

- Holder (source) of attitude
  - 观点（态度）持有者: Mary
- Target (aspect) of attitude
  - 评价对象: the movie
- Type of attitude 
  - 态度类型: like

**From a set of types:** Like， love， hate， value， desire， etc。

**Or (more commonly) simple weighted polarity:** positive， negative， neutral， together with strength

情感分析是一种重要的信息组织方式，研究的目标是自动挖掘和分析文本中的立场、观点、看法、情绪和喜恶等主观信息。其一般的研究框架包含情感抽取、分类、检索与归纳等任务

## 情感信息抽取

情感信息抽取旨在抽取情感文本中有价值的情感信息，它可以看作情感分析的基础任务。

纵观目前的研究现状，有价值的情感信息单元主要有

- 评价词语(如优秀、好用)
- 评价对象(屏幕分辨率)
- 观点持有者(如国家政府、台湾当局)

在对大量的情感文本进行分析之后，不少研究者发现，某些组合搭配对于情感分析的上层任务如情感信息分类以及情感信息的检索与归纳有更直接的帮助，如

- 评价搭配(评价对象和评价词语的搭配，如屏幕分辨率-高)、
- 评价短语(程度副词及其修饰的评价词语的搭配，如不怎么-好)等。

下面本文将一一介绍目前情感信息抽取的具体任务及其主要实现技术。

### 评价词语的抽取和判别

评价词语在情感文本中处于举足轻重的地位，评价词语的识别和极性判断在情感分析领域创建伊始就引起了人们极大的兴致。基于前人大量的研究工作，评价词语的抽取和判别往往是一个一体化的工作，主要分为基于语料库和基于词典两种方法。

#### 基于语料库的评价词语抽取和判别

主要是利用大语料库的统计特性，观察一些现象来挖掘语料库中的评价词语并判断极性。

- 早期的一些学者发现，由连词(如and或but)连接的两个形容词的极性往往存在一定的关联性，如and连接的形容词(如lovely and beautiful)极性相同，然而but连接的形容词(如lovely but unnatural)极性相反。基于这种现象，Hatzivassiloglou和McKeown[1]从大语料库华尔街日报(Wall Street Journal)中发掘出大量的形容词性的评价词语。

- Wiebe等人[7]沿袭了较为相似的工作，他们使用了一种相似度分布的词聚类方法在大语料库上完成了形容词性的评价词语的获取。然而，以上的两种方法仅将评价词语的词性局限于形容词词性，却忽略了其他词性的评价词语。为了避免评价词语词性的限制，Riloff等人[8]手工制定一些模板并选取种子评价词语，使用迭代的方法获取了名词词性的评价词语。

- Turney和Littman[9]提出了点互信息(point   mutual   information)的方法判别某个词语是否是评价词语。这种方法适用于各种词性的评价词语的识别，但是较为依赖种子褒/贬词语集合。

基于语料库的方法：

- 最大的优点在于**简单易行**
- 缺点则在于**可利用的评论语料库有限**，同时评价词语在大语料库中的分布等现象并不容易归纳。

### 基于词典的评价词语抽取及判别方法

主要是使用词典中的词语之间的词义联系来挖掘评价词语. 这里的词典一般是指使用Wo r d N e t或HowNet等.

- 利用词典将手工采集的种子评价词语进行扩展来获取大量的评价词语[10−12].
  - 这种方法简单易行,但是较依赖于种子评价词语的个数和质量,并且容易由于一些词语的多义性而引入噪声.为了避免词语的多义性,一部分学者使用词典中词语的注释信息来完成评价词语的识别与极性判断[13−16].
- Turney等人的点互信息的方法[9],通过计算Wo r d N e t中的所有形容词与种子褒义词代表good和贬义词bad之间的关联度值来识别出评价词语.
  - 并非所有语种的情感资源都像英文一样丰富,对于某些词典资源非常稀缺的语种,有学者将词典资源丰富的语种的情感词典翻译到资源较少的语种中[18],如将英文的情感词典翻译成中文,供中文情感分析应用.但是实验显示,不少评价词语在经过翻译之后极性发生了改变.这也印证了Wiebe在文献[19]中所指出的“词语的词义和其极性有一定的关系,但是相同的词义并不一定有相同的极性”.鉴于此,基于词典的方法的优点在于获取的评价词语的规模非常可观,但是由于很多词存在一词多义现象,构建的情感词典往往含有较多的歧义词,如词语“好”在大多数情况下表现为“优秀”的意思,但在某些情况下扮演修饰成分(如“他跑得好快啊!”). 

- 采用基于图的方法来识别评价词语的极性[6,20].具体来说,该方法将要分类的词语作为图上的点,利用词语之间的联系形成边来构建图,继而采用各种基于图的迭代算法(propagation  algorithm)来完成词语的分类.如,有学者考察图中两个词语的注释信息而构建图[20],继而使用Spin模型对图中的点迭代地进行概率计算,得出每个词语的极性.
- 还有一些学者尝试使用多种图模型[6],如最小切分模型(mincuts)、随机最小切分模型(randomized  mincuts)、标签迭代模型(label  propagation)等完成评价词语的褒贬分类.
  - 实验证实了基于图的方法的有效性.基于图的方法是一种新颖的方法,它可以灵活地将词语间的各种联系作为特征融入图中,继而进行迭代计算.然而,寻找更为有效的词语间特征以及如何选取图算法是值得深入研究的问题.

### 评价对象的抽取

评价对象是指某段评论中所讨论的主题,具体表现为评论文本中评价词语所修饰的对象,如新闻评论中的某个事件/话题或者产品评论中某种产品的属性(如“屏幕”)等.现有的研究大部分集中于产品领域的评价对象的抽取,他们大多将评价对象限定在名词或名词短语(候选评价对象)的范畴内,进而对它们进行进一步的识别.

- 基于规则/模板的方法抽取评价对象
  - 规则的制定通常要基于一系列的语言分析与预处理过程,如词性标注、命名实体识别、句法分析等.相应地,制定的规则也包括词序列规则、词性规则以及句法规则等形式.Yi[21]使用3条限制等级逐渐递进的词性规则从候选评价对象中抽取出真正的评价对象.还有的学者[22,23]使用关联规则挖掘的方法或是基于句法分析的结果[24]找出频繁出现的候选评价对象,继而使用两种剪枝方法去除错误样例.然而,这些方法仅能找出频繁的评价对象.为了发掘出非频繁的评价对象,有学者尝试使用含有评价词语和评价对象槽(slot)的词序列模板[22].此类方法最主要的优点在于针对性强,可以直接针对待解决的问题或特定的语言现象制定规则/模板;而其缺点则在于规则/模板的可扩展性差,人工编写的工作量大,成本较高.
- 将评价对象看作产品属性的一种表现形式
  - (如对数码相机领域而言,“相机的大小”是数码相机的一个属性,而“相机滑盖”是数码相机的一个组成部分),继而考察候选评价对象与领域指示词(如“整体-部分”关系指示词“scanner  has”)之间的关联度来获取真正的评价对象.实验结果表明,这种方法取得了较好的实验效果,超过了基于规则/模板的方法,但难点在于领域指示词的获取.
- 话题模型(topic  model)
  - 很多学者将其应用到情感分析领域.由于评价对象是蕴涵于情感文本中的某些话题,因此可以使用话题模型来评价对象的识别.有学者[28]采用多粒度的话题模型挖掘产品领域情感文本中的评价对象,并将相似的评价对象进行聚类.这种方法理论上能够提高评价对象抽取的召回率.但遗憾的是,还没有实验将这种方法与上述传统的基于名词短语的方法进行对比.

### 观点持有者抽取

观点持有者的抽取在基于新闻评论的情感分析中显得尤为重要,它是观点/评论的隶属者,如新闻评论句“我国政府坚定不移的认为台湾是中国领土不可分割的一部分”中的“我国政府”.很自然地,人们会想到评论中的观点持有者一般是由命名实体(如人名或机构名)组成,因此可以借助于命名实体识别技术来获取观点持有者[31].此外,还有学者曾尝试借助语义角色标注来完成观点持有者的抽取[29].但是这些方法较为依赖自然语言处理的基础技术,有较低的语言覆盖现象和较差的领域适应性.

- 定义为分类任务
  - 这种方法的关键在于分类器和特征的选取.如Choi将其看作一个序列标注问题[32],并使用CRF(conditional  random  field)模型融合各种特征来完成观点持有者的抽取.
  - 相似地,Kim[11]将所有名词短语都视为候选观点持有者,使用ME(maximum entropy)模型来进行计算
- 观点持有者一般是与观点同时出现的,之前方法将观点持有者的抽取当作一个独立的任务
  - 所以可以将观点和观点持有者的识别作为一个任务同时解决.Bethard[33]在抽取出情感句中的观点单元(多是由一些短语组成)之后,分析句中观点和动词的句法关系,即可同步获取观点持有者. 

### 组合评价单元的抽取

评价词语在情感分析中的作用是不言而喻的.然而在某些情况下,单独的评价词语存在一定的歧义性,如评价词语“高”在以下3个句子中的使用：

- Sen 1:凯越的油耗真高.
- Sen 2:捷达的性价比相当高. 
-  Sen 3:这辆车有1米多高. 

Sen  1和Sen  2是情感句,但是评价词语“高”在修饰不同的评价对象时表现出不同的极性.如,“高”在Sen  1中表示贬义,而在Sen  2中则表示褒义.此外,评价词语往往也会出现在非情感句中,如Sen  3.因此,仅考虑单独的评价词语在情感分析中的应用是远远不够的.研究者们发现,有些包含评价词语的“组合评价单元”(如组合“油耗-高”、“相当-高”)对于处理情感分析的上层任务更有帮助.下面将具体来介绍各种形式的组合评价单元. 

